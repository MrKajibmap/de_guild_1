Структура Open e‑commerce 1.0

Датасет Open e‑commerce 1.0 состоит из трёх CSV‑файлов, опубликованных на Harvard Dataverse. Каждая таблица играет свою роль в будущей модели «звезда»:

amazon‑purchases.csv (факт) — детализация покупок 5027 пользователей Amazon за 2018–2022 гг. В файле один заказ = одна строка. Автор статьи описывает восемь столбцов: Survey ResponseID (идентификатор респондента), Order date, Shipping address state, Purchase price per unit, Quantity, ASIN/ISBN (код товара), Title и Category. Обратите внимание, что для цифровых товаров или заказов в Amazon Locker поля Title, Category и Shipping address state могут быть пустыми
nature.com
.

survey.csv (измерение «покупатель») — результаты опроса для участников, согласившихся поделиться данными. Опрос заполняли 6325 человек, но только 5027 дали доступ к своим покупкам; поэтому survey.csv содержит ровно столько же строк, сколько в фактовой таблице
nature.com
. Здесь 33 столбца, которые описывают демографию и поведение покупателя (возраст, раса, пол, образование, доход, наличие детей), отношение к сервисам Amazon (Prime‑подписка, привычки заказа, категории покупок), изменения в жизни за последние 5 лет, показатели здоровья и отношение к приватности (например, стоит ли Amazon продавать пользовательские данные).

fields.csv (справочник вопросов) — словарь к опросу. В нём перечислены все коды опросных вопросов (например, Q-demos-age, Q-demos-race, Q-life-changes) и полный текст соответствующего вопроса. Этот словарь позволяет понять смысл каждого столбца из survey.csv, что важно при построении витрин и тестов качества данных
dss.princeton.edu
.

Модель «звезда» для DWH

Для построения DWH целесообразно выделить следующие таблицы:

Фактовая таблица fact_sales

Содержит по одной записи на покупку. Ключевые поля:

PurchaseID — surrogate‑ключ (генерируется при загрузке).

Survey ResponseID — внешний ключ на dim_customer.

DateID — внешний ключ на dim_date.

ProductID — внешний ключ на dim_product.

RegionID — внешний ключ на dim_region (штат доставки).

Метрики: Quantity, PricePerUnit, TotalSalesAmount = Quantity × PricePerUnit, DiscountApplied (можно вычислять), Profit (если есть себестоимость), ShippingCost (если известна).

Атрибуты заказа: OrderChannel (интернет/мобильный/голосовой), OrderType (физический товар/цифровой).

Измерения

dim_customer (из survey.csv) – главная измерение для анализа. Содержит:

CustomerID (Survey ResponseID) и персональные признаки: возрастные категории, пол, раса, принадлежность к латиноамериканцам (hispanic), образование, уровень дохода, семейный статус, наличие детей.

Поведенческие и восприятие Amazon: наличие Prime‑подписки, частота заказов, любимые категории, ежемесячные траты, мнение о том, может ли Amazon продавать данные, поддержку малому бизнесу, доверие к Amazon и т.п.

Жизненные изменения и здоровье: индикаторы изменений за последние пять лет, самооценка здоровья, показатели веса/роста и т.д.

Остальные вопросы: отношение к приватности, опыт работы с Amazon Locker, удобство интерфейса, предпочтения доставки.

dim_product (из amazon‑purchases.csv) – таблица уникальных товаров. Поля: ProductID (ASIN/ISBN), Title, Category. При необходимости можно обогатить данными о бренде, подкатегории, цене производителя, чтобы поддержать анализ маржинальности.

dim_date – календарное измерение, содержащее дату заказа и атрибуты год, квартал, месяц, номер недели, день недели, флаги выходного/праздничного дня.

dim_region – справочник штатов/регионов (код, название, возможные гео‑координаты). Данные берутся из столбца Shipping address state.

Дополнительные измерения (по необходимости) – dim_channel (web, mobile, Alexa), dim_promo (скидочные акции), dim_return (причины возвратов).

Связи и загрузка

Связь факта и измерений: fact_sales.SurveyResponseID → dim_customer.CustomerID; fact_sales.ProductID → dim_product.ProductID; fact_sales.DateID → dim_date.DateID; fact_sales.RegionID → dim_region.RegionID.

Обогащение: для подсчёта полных сумм и маржи в fact_sales можно подтягивать себестоимость/категорию из dim_product и демографию/поведение из dim_customer.

ODS/bronze слои: исходные CSV загружаются в слой bronze (сырые таблицы). После валидации и преобразований (парсинг дат, нормализация категорий) данные попадают в silver (dimension & fact) и далее в gold (агрегированные витрины).

Вывод

Таким образом, Open e‑commerce 1.0 даёт не только фактовую таблицу покупок с 1,8 млн строками, но и полноценные справочники — анкету из 33 признаков для каждого покупателя и словарь для их расшифровки
nature.com
nature.com
. Это позволяет построить звездообразную модель данных: фактовая таблица fact_sales связана с измерениями dim_customer, dim_product, dim_date и dim_region. Такое моделирование обеспечит удобный и быстродоступный DWH, на котором можно строить отчёты по продажам, когортный анализ, RFM‑сегментацию и витрины для BI.




